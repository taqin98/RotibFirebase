<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>Mobilekit Mobile UI Kit</title>
    <meta name="description" content="Mobilekit HTML Mobile UI Kit">
    <meta name="keywords" content="bootstrap 4, mobile template, cordova, phonegap, mobile, html, responsive" />
    <link rel="icon" type="image/png" href="assets/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icon/192x192.png">
    <link rel="preload" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:400,500,700&amp;display=swap" async>
    <link rel="stylesheet" href="assets/css/style.css" async>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">

    <link rel="stylesheet" href="assets/css/helper.css" async>
    
    <link rel="manifest" href="manifest.json">

    <!-- update the version number as needed -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-app-compat.js"></script> -->
    <!-- include only the Firebase features as you need -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-auth-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-database-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-firestore-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-functions-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-messaging-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-storage-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-analytics-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-remote-config-compat.js"></script> -->
    <!-- <script defer src="/__/firebase/9.6.9/firebase-performance-compat.js"></script> -->
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators. TUTORIAL FIREBASE HOSTING
    -->
    <!-- <script defer src="/__/firebase/init.js?useEmulator=true"></script> -->
    <style type="text/css">
        .p-5px{padding:5px}.card .card-body{padding:5px;line-height:1.4em}.bg-white{background:#fff}
        body.dark-mode-active .appHeader.scrolled.bg-primary.is-active {
            background: #16417f !important;
        }
        body.dark-mode-active .bg-primary {
            background: #16417f !important;
            color: #FFF;
        }
        body.dark-mode-active .profileBox {
            background: #16417f !important;
        }
        body.dark-mode-active .dark-mode-image {
            filter:invert(1);mix-blend-mode:screen
        }
        .swiper-container {
            width: 100%;
            height: 100%;
        }
          #progress {
            position:relative;
            width:250px;
            height:20px;
            border:1px solid red;
          }

          #progress .progress-bar {
            background:blue;
            height:20px;
            width:0%;
            display:inline-block;
          }

          #progress .progress-text {
            position:absolute;
            z-index:2;
            right:0;
          }

    </style>
    <!-- Jquery -->
    <script src="assets/js/lib/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
      $(function(){
        $('#search').load('template/AppSearch.html')
        $('.appHeader').load('template/AppHeader.html')
        $('.appBottomMenu').load('template/AppBottomMenu.html')
        $('#sidebarPanel').load('template/AppSidebar.html')
      })
    </script>
  </head>
  <body>
    <!-- <div id="loader">
      <div class="spinner-border text-primary" role="status"></div>
    </div> -->

    <div id="search" class="appHeader">
    </div>

    <div class="appHeader bg-primary scrolled is-active">
    </div>

    <div id="appCapsule">
    	<div class="error-page">
    		<div class="icon-box text-success">
    			<ion-icon name="checkmark-circle-outline" role="img" class="md hydrated" aria-label="alert circle"></ion-icon>
    		</div>
    		<h1 class="title">Alert Title</h1>
    		<div class="text mb-5" id="textMessage">
    			Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    		</div>

    		<div class="">
    			<div class="row">
    				<!-- <div class="col-6">
    					<a href="javascript:;" class="btn btn-secondary btn-lg btn-block">Go Back</a>
    				</div> -->
    				<div class="col-10 mx-auto">
    					<a href="#" class="btn btn-md btn-primary btn-lg btn-block" id="__btnAction">Try Again</a>
    				</div>
    			</div>
    		</div>
    		<div class="row">
    			<div id="progress" class="text-left" style="display: none;">
    				<span class="progress-text text-center text-white"></span>
    				<div class="progress-bar"></div>
    			</div>
    		</div>
    	</div>
      </div>


      <!-- app footer -->

      <!-- * app footer -->

    </div>

    <div class="appBottomMenu">
    </div>

    <div class="modal fade panelbox panelbox-left" id="sidebarPanel" tabindex="-1" role="dialog">
    </div>
    <!-- ///////////// Js Files ////////////////////  -->
    <!-- Bootstrap-->
    <script src="assets/js/lib/popper.min.js"></script>
    <script src="assets/js/lib/bootstrap.min.js"></script>
    <!-- Ionicons -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@5.0.0/dist/ionicons/ionicons.esm.js" async></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@5.0.0/dist/ionicons/ionicons.js" async></script>
    <!-- Owl Carousel -->
    <script src="assets/js/plugins/owl-carousel/owl.carousel.min.js"></script>
    <!-- SwipperJs -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <!-- Main Js File -->
    <script src="images.js"></script>
    <script src="assets/js/main.js"></script>

    <script type="text/javascript">
      $(document).ready(function(){
        check_cache('images-v3')
      })
    </script>
    
    <script type="text/javascript">
      async function check_cache(CacheName){
        await caches.open(CacheName).then(function(cache) {

          cache.keys().then(function(keyList) {
            console.log('keyList.length', keyList.length)
            if(keyList.length > 0){
            	$('.error-page').find('h1.title').text('Offline Mode')
            	$('.icon-box').find('ion-icon').attr('name', 'checkmark-circle-outline')
            	$('#textMessage').text('Kamu sekarang bisa menggunakan aplikasi tanpa data Internet');

            	$('#__btnAction').text('delete resource');
            	$('#__btnAction').addClass('btn-danger').removeClass('btn-primary');
            	$('#__btnAction').click(function(e){
            		e.preventDefault();
            		$('#__btnAction').text('proses...');
            		asyncCall_delete()
            	})
            } else {
            	$('.error-page').find('h1.title').text('Online Mode')
            	$('.icon-box').find('ion-icon').attr('name', 'alert-circle')
            	$('#textMessage').html('Kamu sekarang menggunakan data internet untuk memuat resource aplikasi<br>Download resources untuk menggunakan aplikasi secara offline');

            	$('#__btnAction').text('download resource');
            	$('#__btnAction').addClass('btn-primary').removeClass('btn-danger');
            	$('#__btnAction').click(function(e){
            		e.preventDefault();
            		$('#progress').css('display', 'block')
            		$('#__btnAction').text('proses...');
            		asyncCall_download()
            	})
            }

            console.log('Jumlah Data di cache [images-v3]', keyList.length)
          });

        })
      }

    </script>
  </body>
</html>
